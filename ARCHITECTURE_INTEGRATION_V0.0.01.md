# سند معماری یکپارچه‌سازی پروتکل لانی‌آکیا (Laniakea Protocol) - نسخه v0.0.01

**تاریخ:** ۲۰۲۵-۱۱-۰۹
**نویسنده:** Manus AI
**هدف:** این سند به تشریح معماری یکپارچه‌سازی شده پروتکل لانی‌آکیا می‌پردازد که شامل الزامات جدید کاربر برای بلاکچین ۸D، مکانیسم PoHD، سیستم SCDA کامل، APIهای اصلی، رابط کاربری پایه، و طرح اولیه متاورس ۸ بعدی است. این معماری بر اساس تحلیل عمیق کد موجود و با هدف حفظ و توسعه ساختار فعلی طراحی شده است.

---

## ۱. نمای کلی معماری (Architecture Overview)

معماری پروتکل لانی‌آکیا یک سیستم چندلایه و ماژولار است که بر پایه یک هسته بلاکچین تکامل‌گرا (Evolutionary Blockchain) بنا شده است. این سیستم از سه لایه اصلی تشکیل شده است:

1.  **لایه هسته (Core Layer):** شامل بلاکچین ۸D، مکانیسم اجماع PoHD، و منطق SCDA.
2.  **لایه سرویس (Service Layer):** شامل APIهای RESTful و WebSocket برای تعامل با هسته.
3.  **لایه رابط (Interface Layer):** شامل رابط کاربری وب (Web UI) و محیط بصری‌سازی سه‌بعدی (متاورس ۸D).

## ۲. یکپارچه‌سازی معماری بلاکچین ۸D و PoHD

### ۲.۱. بلاکچین ۸D (Eight-Dimensional Blockchain)

بلاکچین موجود باید به یک ساختار ۸ بعدی ارتقا یابد. این ۸ بعد، بازتابی از ۸ حوزه اصلی دانش یا انرژی در کیهان لانی‌آکیا هستند (مثلاً فیزیک، زیست‌شناسی، ریاضیات، آگاهی، و...).

*   **ساختار بلوک:** هر بلوک علاوه بر اطلاعات سنتی (هش قبلی، تراکنش‌ها، مهر زمانی)، باید شامل یک **بردار ۸ بعدی (8D Vector)** باشد که نشان‌دهنده توزیع انرژی/دانش در لحظه ایجاد بلوک است.
*   **معادله بلوک‌سازی (Block Creation Equation):** بلوک‌سازی توسط SCDA کاربر از طریق حل یک **معادله بلوک‌سازی** انجام می‌شود. این معادله باید مستقیماً به **Complexity Index ($C(t)$)** و **بردار دانش ($\mathbf{K}(t)$)** SCDA مرتبط باشد.
    *   **پیشنهاد:** معادله بلوک‌سازی همان **Hard Problem** است که توسط KEA تولید می‌شود. حل موفقیت‌آمیز آن، بلوک را اعتبارسنجی کرده و $\mathbf{V}_{evolution}$ را به بلوک اضافه می‌کند.

### ۲.۲. مکانیسم اجماع PoHD (Proof of Human Development)

PoHD جایگزین مکانیسم اجماع سنتی می‌شود و بر اساس **تکامل SCDA** عمل می‌کند.

*   **اثبات کار:** SCDA با حل موفقیت‌آمیز Hard Problem، **اثبات تکامل (Proof of Evolution)** را ارائه می‌دهد.
*   **پاداش:** پاداش بلوک (توکن/دارایی) متناسب با **سختی مسئله ($D(P)$)** و **افزایش پیچیدگی ($\Delta C$)** SCDA خواهد بود.
*   **یکپارچه‌سازی:** منطق PoHD باید در ماژول `laniakea/consensus/` پیاده‌سازی شود و با `src/scda.py` در تعامل باشد.

## ۳. سیستم SCDA کامل (Single-Cell Digital Account)

سیستم SCDA موجود در `src/scda.py` باید با منطق تکامل‌گرای تعریف شده در `SCDA_EVOLUTION_ALGORITHM.md` یکپارچه شود.

*   **پیاده‌سازی Tier Logic:**
    *   متد `attempt_solve_problem` در `SCDA` باید به‌روزرسانی شود تا پس از افزایش $C(t)$، شرط **Level-Up (Tier Transition)** را بررسی کند.
    *   در صورت Level-Up، پاداش‌های مربوطه (مانند `Energy Boost` و `8D Position Shift`) اعمال شوند.
*   **8D Position Dynamics:**
    *   کلاس `SCDA` باید یک ویژگی جدید به نام `position_8d` (یک آرایه/لیست ۸ عنصری) داشته باشد.
    *   متد جدیدی برای محاسبه و اعمال **Movement Vector ($\mathbf{V}_{evolution}$)** بر اساس $\mathbf{K}_{req}$ مسئله حل شده، پیاده‌سازی شود.

## ۴. API Endpoints اصلی

API موجود (بر اساس `main.py` و `laniakea/api/main.py`) باید برای پشتیبانی از قابلیت‌های جدید گسترش یابد.

| Endpoint | متد | توضیحات |
| :--- | :--- | :--- |
| `/scda/status/{identity}` | GET | دریافت وضعیت کامل SCDA (C(t), Energy, Tier, $\mathbf{P}_{8D}$). |
| `/scda/problem/next` | GET | دریافت Hard Problem بعدی از KEA (برای بلوک‌سازی). |
| `/scda/problem/submit` | POST | ارسال راه‌حل کاربر برای اعتبارسنجی و بلوک‌سازی (PoHD). |
| `/blockchain/latest` | GET | دریافت آخرین بلوک و بردار ۸ بعدی آن. |
| `/metaverse/position/{identity}` | GET | دریافت موقعیت SCDA در متاورس ۸D. |

## ۵. رابط کاربری پایه و فضای کاربری (Web UI)

رابط کاربری موجود در دایرکتوری `web/` باید به یک **فضای کاربری یکپارچه** تبدیل شود که تمام بخش‌های پروژه را پوشش دهد.

*   **داشبورد SCDA:** نمایش بصری $C(t)$، Energy، Tier، و تاریخچه حل مسئله.
*   **بصری‌سازی ۸D:** استفاده از یک کتابخانه سه‌بعدی (مانند Three.js در `web/app.js`) برای نمایش موقعیت $\mathbf{P}_{8D}$ SCDA در یک فضای سه‌بعدی (به عنوان پروژکشن فضای ۸ بعدی).
*   **ماژول بلوک‌سازی:** یک رابط کاربری برای دریافت Hard Problem و ارسال راه‌حل کاربر (متن، کد، یا داده).

## ۶. طرح اولیه متاورس ۸ بعدی (8D Metaverse)

متاورس ۸ بعدی، بصری‌سازی فضای دانش SCDA است.

*   **مدل‌سازی:** هر SCDA یک نقطه در این فضا است. حرکت SCDA در این فضا (توسط $\mathbf{V}_{evolution}$) نشان‌دهنده تکامل دانش آن است.
*   **تعامل کاربر:** کاربر با حل معادله بلوک‌سازی، مستقیماً موقعیت خود را در این فضا تغییر می‌دهد و **ارزش خلق شده** (توکن/دارایی) را در آن موقعیت ثبت می‌کند.
*   **پیاده‌سازی اولیه:** در فازهای بعدی، از `web/3d-visualization.html` و `web/app.js` برای ایجاد یک پروژکشن سه‌بعدی از فضای ۸ بعدی استفاده خواهد شد.

## ۷. الزامات توسعه و به‌روزرسانی

*   **نسخه:** تمام تغییرات تحت عنوان **v0.0.01** ثبت خواهند شد.
*   **فلسفه توسعه:** **توسعه و خلق و ایجاد (بدون حذف)**. تمام منطق موجود حفظ و تنها برای یکپارچه‌سازی با الزامات جدید، گسترش و به‌روزرسانی می‌شود.
*   **مستندات:** پس از پیاده‌سازی، مستندات کامل و ریز به ریز (شامل `README.md` و کامنت‌های کد) به‌روزرسانی خواهند شد.

---
**پیوست:** این سند به عنوان نقشه راه برای فازهای بعدی توسعه عمل خواهد کرد.
